<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Skeeball Demo | Stats Automation</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Joe Kanakaraj">
	<link rel="stylesheet" href="http://code.joe-kanakaraj.com/projects/brewskeeball/stats/skeeson17/stats.css" type="text/css" media="all" /> 
	<link rel="stylesheet" href="http://code.joe-kanakaraj.com/projects/brewskeeball/stats/skeeson17/css/ui-lightness/jquery-ui-1.8.13.custom.css" type="text/css" media="all" />
	<link rel="stylesheet" href="http://tablesorter.com/themes/blue/style.css" type="text/css"/>
	
	<style>
	body{font-family:helvetica, verdana}
	.stats{padding:0; margin:0}
	.stats tbody tr td {border-collapse:collapse;padding:3px;font-size:11px;}
	.stats thead tr th {border-collapse:collapse;padding:3px;font-size:12px;width:60px;}
	.totals thead tr th {width:80px;}
	.stats thead tr th.long {width:150px;}
	.marks thead tr th.long {width:200px;}
	.standings thead tr th.long {width:160px;}
	.standings thead tr th {width:100px;}
	.night-container {overflow:hidden;}
	.night-container div {float:left;background-color:#fff;}
	.subnav {float:left;padding-right:30px;}
	.stats caption {display:none;}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js" type="text/javascript"></script>
	<script src="js/jquery.template.min.js"></script>
	<script src="js/jquery.tablesorter.min.js" type="text/javascript"></script>
	<script>
	var props = {
		sun : {
			key : "0At0CaY3KoBvedEFwZ3k5U1FPbWlETTE5UzdKdHdNZHc",
			standings : "od6",
			teamScores : "od5",
			highRollers : "od4",
			fullies : "odb",
			chips : "od8",
			hundos : "od9",
			fourSix : "ocy",
			highFive : "ocz",
			cherries : "oda"
		}
	}
	</script>
	
	<!-- Date: 2011-07-28 -->
</head>
<body>
<h1>Skeeball Demo</h1>
<h2>Stats Automation</h2>
	<div id="content"> 
		<ul id="tabs"> 
			<li class="sun"><a href="#sun-container">Sunday</a></li> 
			<li class="mon"><a href="#mon-container">Monday</a></li> 
			<li class="wed"><a href="#wed-container">Wednesday</a></li> 
		</ul> 
		<div class="night-container" id="sun-container"> 
	    	<ul class="subnav"> 
				<li data-night="sun" data-type="standings" data-ws="od6"><a href="#sun-standings">Standings</a></li> 
	    		<li data-night="sun" data-type="teamScores" data-ws="od5"><a href="#sun-teamScores">Totals</a></li> 
	    		<li data-night="sun" data-type="highRollers" data-ws="od4"><a href="#sun-highRollers">High Rollers</a></li> 
	    		<li data-night="sun" data-type="fullies" data-ws="odb"><a href="#sun-fullies">Fullies</a></li> 
	    		<li data-night="sun" data-type="cherries" data-ws="oda"><a href="#sun-cherries">Cherries</a></li> 
	    		<li data-night="sun" data-type="chips" data-ws="od8"><a href="#sun-chips">Chips</a></li> 
	    		<li data-night="sun" data-type="hundos" data-ws="od9"><a href="#sun-hundos">Hundos</a></li> 
	            <li data-night="sun" data-type="foursix" data-ws="ocy"><a href="#sun-foursix">46+</a></li> 

			</ul> 	
	 		<!-- TEAM STANDINGS --> 
			<div id="sun-standings" class="stats-container"></div>
			<div id="sun-teamScores" class="stats-container"></div>
			<div id="sun-highRollers" class="stats-container"></div>
			<div id="sun-fullies" class="stats-container"></div>
			<div id="sun-cherries" class="stats-container"></div>
			<div id="sun-chips" class="stats-container"></div>
			<div id="sun-hundos" class="stats-container"></div>
			<div id="sun-foursix" class="stats-container"></div>
		</div>
		
		<div class="night-container" id="mon-container"> 
	    	<ul class="subnav"> 
				<li data-night="mon" data-type="standings" data-ws="od6"><a href="#mon-standings">Standings</a></li> 
	    		<li data-night="mon" data-type="teamScores" data-ws="od5"><a href="#mon-teamScores">Totals</a></li> 
	    		<li data-night="mon" data-type="highRollers" data-ws="od4"><a href="#mon-highRollers">High Rollers</a></li> 
	    		<li data-night="mon" data-type="fullies" data-ws="odb"><a href="#mon-fullies">Fullies</a></li> 
	    		<li data-night="mon" data-type="cherries" data-ws="oda"><a href="#mon-cherries">Cherries</a></li> 
	    		<li data-night="mon" data-type="chips" data-ws="od8"><a href="#mon-chips">Chips</a></li> 
	    		<li data-night="mon" data-type="hundos" data-ws="od9"><a href="#mon-hundos">Hundos</a></li> 
	            <li data-night="mon" data-type="foursix" data-ws="ocy"><a href="#mon-foursix">46+</a></li> 
			</ul> 	
	 		<!-- TEAM STANDINGS --> 
			<div id="mon-standings" class="stats-container"></div>
			<div id="mon-teamScores" class="stats-container"></div>
			<div id="mon-highRollers" class="stats-container"></div>
			<div id="mon-fullies" class="stats-container"></div>
			<div id="mon-cherries" class="stats-container"></div>
			<div id="mon-chips" class="stats-container"></div>
			<div id="mon-hundos" class="stats-container"></div>
			<div id="mon-foursix" class="stats-container"></div>
		</div>
		
		<div class="night-container" id="wed-container"> 
	    	<ul class="subnav"> 
				<li data-night="wed" data-type="standings" data-ws="od6"><a href="#wed-standings">Standings</a></li> 
	    		<li data-night="wed" data-type="teamScores" data-ws="od5"><a href="#wed-teamScores">Totals</a></li> 
	    		<li data-night="wed" data-type="highRollers" data-ws="od4"><a href="#wed-highRollers">High Rollers</a></li> 
	    		<li data-night="wed" data-type="fullies" data-ws="odb"><a href="#wed-fullies">Fullies</a></li> 
	    		<li data-night="wed" data-type="cherries" data-ws="oda"><a href="#wed-cherries">Cherries</a></li> 
	    		<li data-night="wed" data-type="chips" data-ws="od8"><a href="#wed-chips">Chips</a></li> 
	    		<li data-night="wed" data-type="hundos" data-ws="od9"><a href="#wed-hundos">Hundos</a></li> 
	            <li data-night="wed" data-type="foursix" data-ws="ocy"><a href="#wed-foursix">46+</a></li> 
			</ul> 	
	 		<!-- TEAM STANDINGS --> 
			<div id="wed-standings" class="stats-container"></div>
			<div id="wed-teamScores" class="stats-container"></div>
			<div id="wed-highRollers" class="stats-container"></div>
			<div id="wed-fullies" class="stats-container"></div>
			<div id="wed-cherries" class="stats-container"></div>
			<div id="wed-chips" class="stats-container"></div>
			<div id="wed-hundos" class="stats-container"></div>
			<div id="wed-foursix" class="stats-container"></div>
		</div>
	</div>



	<script>
	$(function(){
		$("#content").tabs({ collapsible: true, spinner: 'Retrieving data...' });
		$(".subnav li").bind("click", function(){
			$(".stats-container").empty().hide();			
			
			
			var night = $(this).data("night"),
				type  = $(this).data("type"),
				ws    = $(this).data("ws");

				var key = (night === 'sun') ? 
					//SUNDAY NIGHT KEY
					"0At0CaY3KoBvedEFwZ3k5U1FPbWlETTE5UzdKdHdNZHc" :  (night === 'mon')? 
					//MONDAY NIGHT KEY
					"0At0CaY3KoBvedDE0Z1ZSX0E1ZUx1MmdncVljNUthSkE": 
					//WEDNESDAY NIGHT KEY
					"0At0CaY3KoBvedGdaRUE0aXd4ZHU0S2xfRlNUVmRtZ1E", 
				data = "https://spreadsheets.google.com/feeds/list/"+key+"/"+ws+"/public/values?alt=json-in-script";					

			$.ajax({
				url : data,
				dataType: 'jsonp',
				success: function(json){
					var elem = $("#"+night+"-"+type),
						tpl = (type ==='highRollers')?"tpl/playerStats.tpl": 
							(type ==='standings')? "tpl/standings.tpl":
							(type ==='teamScores')?"tpl/totals.tpl":"tpl/marks.tpl";
					
					if (json.feed.entry){
						
						var tmp = $.template(tpl,json, true);
						$(tmp).appendTo(elem);
						$(elem).fadeIn();
						$("#tableSorted").tablesorter( {sortList: [[1,1]]} ); 
						
					} else {
						$("<table><tr><td colspan='10'>Nada!</td></tr></table>").appendTo(elem);
						$(elem).fadeIn();
					}
				},
				error: function(xhr){
					console.dir(xhr)
					$("#error").append(xhr).show();
				}
			})
		});
		
	});
	</script>
	
	

</body>
</html>
